<script>
    const user = JSON.parse(localStorage.getItem("loggedInUser"));

    if (!user) {
        window.location.href = "index.html";
    }

    document.getElementById("welcome").innerText = "Welcome, " + user.name + "!";
    document.getElementById("info").innerText =
        "Logged in at: " + user.loginTime + "\nEmail: " + user.email;

    console.log("ðŸ“Œ CURRENT ACTIVE USER:");
    console.table(user);

    // show all users
    const allUsers = JSON.parse(localStorage.getItem("users")) || [];
    let list = "<ul>";
    allUsers.forEach(u => {
        list += `<li>${u.name} â€” ${u.email} â€” Registered: ${u.createdAt}</li>`;
    });
    list += "</ul>";

    document.getElementById("userList").innerHTML = list;

    console.log("ðŸ“š ALL REGISTERED USERS:");
    console.table(allUsers);

    // logout
    document.getElementById("logout").onclick = () => {
        const time = new Date().toLocaleString();
        localStorage.setItem("lastLogout", time);

        console.log(`ðŸšª USER LOGGED OUT at ${time}`);
        console.table(user);

        localStorage.removeItem("loggedInUser");
        window.location.href = "index.html";
    };
</script>
