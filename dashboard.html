<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
</head>

<body style="font-family: Arial; padding: 20px;">

    <h1 id="welcome"></h1>
    <p id="info"></p>
    <button id="logout">Logout</button>

    <h2>All Registered Users</h2>
    <div id="userList"></div>

    <script>
        const user = JSON.parse(localStorage.getItem("loggedInUser"));

        // if no user logged in → kick back to login page
        if (!user) {
            window.location.href = "index.html";
        }

        document.getElementById("welcome").innerText = "Welcome, " + user.name + "!";
        document.getElementById("info").innerText = 
            "Logged in at: " + user.loginTime + "\nEmail: " + user.email;

        // show all users
        const allUsers = JSON.parse(localStorage.getItem("users")) || [];
        let list = "<ul>";
        allUsers.forEach(u => {
            list += `<li>${u.name} — ${u.email} — Registered: ${u.createdAt}</li>`;
        });
        list += "</ul>";

        document.getElementById("userList").innerHTML = list;

        // logout
        document.getElementById("logout").onclick = () => {
            localStorage.setItem("lastLogout", new Date().toLocaleString());
            localStorage.removeItem("loggedInUser");
            window.location.href = "index.html";
        };
    </script>

</body>
</html>
